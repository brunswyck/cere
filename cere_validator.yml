---
- name: bootstrap validators
  # add hostname or groupname here where validator(d) needs to run
  # as defined in hosts/ inventory folder
  hosts: testing
  gather_facts: True
  vars:
    ansible_user: root
    ansible_port: 22
  pre_tasks:
    - setup:
        gather_subset:
          - os_family
  vars_files:
    - vault/secrets.yml      # my encrypted variables
    - group_vars/all.yml     # variables that apply to all servers
    - group_vars/cere.yml    # variables that apply to all cere servers

  tasks:
    - include_tasks: localhost_localadmin.yml
      vars:
        ansible_become_pass: "{{ local_password }}"
        ansible_user: "{{ admin }}"

  roles:
    - role: bootstrap

    # - role: bootstrap

    # add local ssh config to ~/.ssh/config.d/<yourservername>
    #- role: ssh_configd_add_node
    #      vars:
    #        server_ip: 
    #
    #    - role: docker_setup
    #      when: ansible_facts['distribution'] == 'Ubuntu'
    #      tags: docker
    #
    #    - role: cere
    #      vars:  # vars here override those defined in role/defaults/main.yml
    #        network: "devnet"  # devnet|devs-cluster-[12345]|mainnet|qanet|testnet
    #
    #    - role: ufw
    #      vars:
    #        ports: { allow: [30333], deny: [9933, 9944] }
    #      tags: ufw
